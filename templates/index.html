<!DOCTYPE html>
<html lang = "en">
<head>
    <meta charset = "UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
    <title>Knowledge Base Management</title>
    <link rel = "stylesheet" href = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
    <script>
        // automatically submit form when a file is selected
        function submitFormOnFileSelection(inputElement) {
            if (inputElement.files.length > 0) {
                inputElement.form.submit();
            }
        }
    </script>
</head>
<body class = "bg-light">
    <div class = "container mt-5">
        <h1 class = "text-center mb-4">Knowledge Base Management</h1>

        <div class = "mb-4">
            <h2>Current Knowledge Base:</h2>
            <div class = "border p-3 bg-white rounded">
                <pre>{{ default_knowledge_base }}</pre>
            </div>
        </div>

        <div class="row">
            <!-- file upload -->
            <div class = "col-md-6">
                <h2>Upload a New Knowledge Base:</h2>
                <form action = "/" method = "post" enctype = "multipart/form-data" class = "mt-3">
                    <input 
                        type = "file" 
                        name = "file" 
                        class = "form-control mb-3" 
                        id = "file" 
                        onchange = "submitFormOnFileSelection(this)"
                    >
                </form>
            </div>

            <!-- textarea input -->
            <div class = "col-md-6">
                <h2>Or Type Your Knowledge Base:</h2>
                <form action = "/" method = "post" class = "mt-3">
                    <textarea 
                        name = "typed_knowledge_base" 
                        rows = "8" 
                        class = "form-control mb-3" 
                        placeholder = "Enter knowledge base here"
                    ></textarea>
                    <button type = "submit" class = "btn btn-primary w-100">Submit</button>
                </form>
            </div>
        </div>

        <div class = "text-center mt-4">
            <a href = "/chat" class = "btn btn-success">Proceed to Chat</a>
        </div>
    </div>

    <script src = "https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>